<!--
Copyright (c) 2024 Themba Mzumara
This file is part of SwissJS Framework. All rights reserved.
Licensed under the MIT License. See LICENSE in the project root for license information.
-->

# Phase 5 Direction

Great—Phase 5 is where we turn SwissJS from “stable library with strong guardrails” into a polished product with a growing ecosystem and enterprise runway.

## Phase 5 Objectives

- Stabilize v1 API surface: Lock public API and enforce compatibility rules.
- Ecosystem expansion: Official plugins, templates, and docs that accelerate adoption.
- Enterprise readiness: New Enterprise repo (server-first), security posture, and release discipline.
- DX excellence: Tooling, docs, and extension quality to reduce time-to-first-success.
- Operational maturity: Automated releases, provenance, dependency hygiene, and policies.

## Pillars and Deliverables

### [Public API v1 freeze]

- Deliverables:
  - Public API reference complete and linked (`docs/api/**`) with “stable since” tags.
  - SemVer + deprecation policy in `docs/development/public-vs-internal-api.md`.
  - CI guardrails extended: block breaking changes or require `BREAKING CHANGE:` scope.
- Acceptance:
  - No wildcard exports in public barrels (`packages/**/src/index.ts`).
  - CI job `policy-checks` gates merges on public API changes requiring approval from CODEOWNERS.

### [Release & Distribution]

- Deliverables:
  - Versioning and release scripts (changesets or conventional commits → changelog).
  - NPM publish workflow with provenance/SLSA-attestations.
  - SBOM generation (CycloneDX) and `npm audit`/Snyk scan steps.
- Acceptance:
  - Tag-to-NPM publish CI successful across `@swissjs/*` packages.
  - Signed artifacts, autogenerated CHANGELOG.md per package.

### [Enterprise Framework Repo Kickoff] (separate repo)

- Deliverables:
  - Repo scaffold with `.ui` everywhere; packages: `enterprise-core`, `security`, `telemetry`.
  - Server-first adapters (Node runtime, edge notes), middleware, capability bridges.
  - Dev docs: architecture, development, design decisions.
- Acceptance:
  - `pnpm install`, `pnpm reset` clean, basic SSR route and capability demo works.
  - Uses Swiss Library as dependency; no circular deps.

### [Plugin Ecosystem Growth]

- Deliverables:
  - Web storage plugin GA (IndexedDB/local/session parity + fallback matrix doc).
  - 2–3 new official plugins:
    - HTTP/Fetch client with capability-scoped policies
    - Cookie/session manager (server/browser parity)
    - Feature flags/experiments (capability-guarded)
  - Plugin SDK docs: `docs/plugins/**` with lifecycle hooks, examples.
- Acceptance:
  - Each plugin has tests, typed public barrels, docs pages, and examples.

### [DevTools Swiss Extension (MV3) to Beta]

- Deliverables:
  - Events/inspection: plugin hooks timeline, security audit events, component lifecycle.
  - Packaging + publishing guide; CI artifact for signed zip.
  - Permissions minimized and documented.
- Acceptance:
  - Works across Swiss apps; basic inspection of PluginManager and `securityError` hooks.
  - CI builds and uploads release asset per tag.

### [Performance & SSR/Islands]

- Deliverables:
  - Compiler perf pass (AST transforms profiling), memoization opportunities.
  - SSR and Islands docs; hydration stability tests.
  - Benchmarks and scenarios (`docs/perf/**`).
- Acceptance:
  - Defined perf baselines, measurable gains on compile time or render throughput.
  - SSR/islands E2E sample passes CI.

### [Security Posture+]

- Deliverables:
  - Prebuilt policy packs and examples for common app types.
  - Static security rules for deep import and capability misuse patterns.
  - Supply chain: dependency update bot, license checks.
- Acceptance:
  - Policy examples in `docs/security/**`, runnable demos.
  - CI fails on disallowed licenses or critical vulnerabilities.

### [DX & Docs Polish]

- Deliverables:
  - “Getting Started” flow with a single template: `pnpm create swiss@latest`.
  - End-to-end tutorial project with testing, plugin integration, and deployment.
  - Error messages with remediation links; doc search/index improvements.
- Acceptance:
  - New user can bootstrap, run, test, and build within 15 minutes using docs alone.

## Risks and Mitigations

- Risk: API churn post-freeze → Introduce feature flags and “experimental” namespaces, clear deprecation policy.
- Risk: CI noise/provenance friction → Stage rollout; start with changelogs + publish, then add SBOM/signing.
- Risk: Extension scopes → Keep permissions minimal; isolate privileged operations in background; content script least-priv.

## Success Metrics

- DX: Time-to-first-success <15 min; number of template-based starts.
- Quality: CI pass rates; policy-violation regression count trending down.
- Adoption: Plugin downloads; stars/issues ratio; docs unique visitors.
- Stability: Public API change frequency post-freeze; semver adherence.

## Working Mode (Phase 5)

- Execute on a dedicated branch and land all milestones together, then merge into `develop`.
- Continue following the preferred dev flow: commit → `pnpm reset` → commit generated → push.
